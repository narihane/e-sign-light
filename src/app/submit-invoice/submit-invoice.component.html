<div class="card card-register">
  <form class="form" [formGroup]="invoiceForm" (ngSubmit)="onInvoiceAdd()">
    <div class="card-body">
      <div formArrayName="fixed">
        <div class="row">
          <div class="col-lg-5 col-md-6 offset-lg-0 offset-md-3">
            <div class="input-group">
              <div class="input-group-prepend">
                <div class="input-group-text">
                  <i class="fas fa-user"></i>
                </div>
              </div>
              <input type="text" placeholder="Client Name" class="form-control" id="name" name="name" required
                formControlName="client_name">
            </div>
          </div>
          <div class="col-lg-5 col-md-6 offset-lg-0 offset-md-3">
            <div class="input-group">
              <div class="input-group-prepend">
                <div class="input-group-text">
                  <i class="fas fa-mobile-alt"></i>
                </div>
              </div>
              <input type="text" placeholder="Client Phone Number" class="form-control" id="number" name="number"
                required formControlName="client_phone">
            </div>
          </div>
          <div class="col-lg-5 col-md-6 offset-lg-0 offset-md-3">
            <div class="input-group">
              <div class="input-group-prepend">
                <div class="input-group-text">
                  <i class="far fa-envelope"></i>
                </div>
              </div>
              <input type="text" placeholder="Client Email" class="form-control" id="email" name="email" required
                formControlName="client_email">
            </div>
          </div>
          <div class="col-lg-5 col-md-6 offset-lg-0 offset-md-3">
            <div class="input-group">
              <div class="input-group-prepend">
                <div class="input-group-text">
                  <i class="far fa-address-card"></i>
                </div>
              </div>
              <input type="text" placeholder="Client ID" class="form-control" id="id" name="id"
                formControlName="client_id" totalPrice [class.invalid]="(invoiceForm.get('fixed')?.get('client_id')?.touched ||
                      invoiceForm.get('fixed')?.get('client_id')?.dirty) &&
                      invoiceForm.get('fixed')?.get('client_id')?.invalid && isSubmitted">
              <span class="invalid-feedback" *ngIf="(invoiceForm.get('fixed')?.get('client_id')?.touched ||
                      invoiceForm.get('fixed')?.get('client_id')?.dirty) &&
                      invoiceForm.get('fixed')?.get('client_id')?.invalid && isSubmitted">
                <!-- *ngIf="(invoiceForm.get('fixed')?.get('client_id')?.touched ||
                      invoiceForm.get('fixed')?.get('client_id')?.dirty) &&
                      invoiceForm.get('fixed')?.get('client_id')?.invalid">  -->
                Client ID must be filled
              </span>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-lg-5 col-md-6 offset-lg-0 offset-md-3">
            <!-- <div class="input-group"> -->
            <label for="exampleFormControlSelect3">Payment Type</label>
            <select class="form-control" formControlName="payment_type" id="exampleFormControlSelect3">
              <option style="color: black;">Cash</option>
              <option style="color: black;">Visa</option>
            </select>
            <!-- </div> -->
          </div>
          <div class="col-lg-5 col-md-6 offset-lg-0 offset-md-3">
            <label for="branchDD">Branch</label>
            <select class="form-control" formControlName="branch" id="branchDD">
              <option style="color: black;">Korba</option>
              <option style="color: black;">Tagamoaa</option>
            </select>
          </div>
        </div>
      </div>
      <div formArrayName="items">
        <div *ngFor="let attribute of items().controls; let i=index" [formGroupName]="i">
          <div class="row">
            <div class="col-lg-10 col-md-10 offset-lg-0 offset-md-3"></div>
            <div class="col-lg-1 col-md-1 offset-lg-0 offset-md-3">
              <button class="btn btn-link btn-fab btn-icon btn-round" (click)="addItem()">
                <i class="tim-icons icon-simple-add" style="color:aliceblue"></i>
              </button>
            </div>
            <div class="col-lg-1 col-md-1 offset-lg-0 offset-md-3">
              <button class="btn btn-link btn-fab btn-icon btn-round" (click)="deleteItem(i)">
                <i class="tim-icons icon-trash-simple" style="color:crimson"></i>
              </button>
            </div>
          </div>
          <div class="row">
            <div class="col-lg-5 col-md-6 offset-lg-0 offset-md-3">
              <div class="input-group">
                <div class="input-group-prepend">
                  <div class="input-group-text">
                    <i class="far fa-gem"></i>
                  </div>
                </div>
                <input type="text" class="form-control" placeholder="Model" class="form-control" id="model" name="model"
                  required formControlName="model">
              </div>
            </div>
            <div class="col-lg-5 col-md-6 offset-lg-0 offset-md-3">
              <div class="input-group">
                <div class="input-group-prepend">
                  <div class="input-group-text">
                    <i class="fas fa-barcode"></i>
                  </div>
                </div>
                <input type="text" class="form-control" placeholder="Serial#" class="form-control" id="serial"
                  name="serial" required formControlName="serial_number">
              </div>
            </div>

          </div>
          <div class="row">
            <div class="col-lg-5 col-md-6 offset-lg-0 offset-md-3">
              <label for="exampleFormControlSelect1">Quantity</label>
              <select class="form-control" formControlName="quantity" id="exampleFormControlSelect1">
                <option style="color: black;">1</option>
                <option style="color: black;">2</option>
                <option style="color: black;">3</option>
                <option style="color: black;">4</option>
                <option style="color: black;">5</option>
                <option style="color: black;">6</option>
                <option style="color: black;">7</option>
                <option style="color: black;">8</option>
                <option style="color: black;">9</option>
                <option style="color: black;">10</option>
              </select>

              <label for="exampleFormControlSelect2">Karat</label>
              <select class="form-control" formControlName="karat" id="exampleFormControlSelect2">
                <option style="color: black;">18</option>
                <option style="color: black;">21</option>
                <option style="color: black;">24</option>
              </select>
            </div>
            <div class="col-lg-5 col-md-6 offset-lg-0 offset-md-3">
              <div class="input-group">
                <div class="input-group-prepend">
                  <div class="input-group-text">
                    <i class="fas fa-tachometer-alt"></i>
                  </div>
                </div>
                <input type="text" class="form-control" placeholder="Weight in gm" class="form-control" id="weight"
                  name="weight" required formControlName="weight">
              </div>
              <label for="exampleFormControlSelect1">Category</label>
              <select class="form-control" formControlName="category" id="exampleFormControlSelect1">
                <option *ngFor="let category of categories; let i = index" style="color: black;">{{category}}
                </option>
              </select>
              <div class="input-group">
                <div class="input-group-prepend">
                  <div class="input-group-text">
                    <i class="tim-icons">EGP</i>
                  </div>
                </div>
                <input type="text" class="form-control" placeholder="Price" class="form-control" id="price" name="price"
                  required formControlName="price">
              </div>
            </div>
          </div>
        </div>

      </div>
      <div class="card-footer">
        <button href="javascript:void(0)" [useExistingCss]="true" type="submit" printSectionId="myFormPrint" ngxPrint
          class="btn btn-primary btn-round btn-lg" printTitle="">Submit</button>
      </div>
    </div>
    <div id='myFormPrint' style="display: none;">
      <app-print-invoice [inputForm]="invoiceForm.value"></app-print-invoice>
    </div>
  </form>
</div>
